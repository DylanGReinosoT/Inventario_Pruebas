È
PC:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\WeatherForecast.cs
	namespace 	
InventarioPrueba
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Í
HC:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddControllers		 
(		  
)		  !
;		! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
options, 3
=>4 6
options 
. 
UseSqlServer 
( 
builder 
. 
Configuration *
.* +
GetConnectionString+ >
(> ?
$str? R
)R S
)S T
)T U
;U V
builder 
. 
Services 
. 
AddControllers 
(  
)  !
.! "
AddJsonOptions" 0
(0 1
options1 8
=>9 ;
{ 
options 
. 	!
JsonSerializerOptions	 
. 
ReferenceHandler /
=0 1
ReferenceHandler2 B
.B C
PreserveC K
;K L
options 
. 	!
JsonSerializerOptions	 
. 
WriteIndented ,
=- .
true/ 3
;3 4
} 
) 
; 
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app!! 
.!! 
UseAuthorization!! 
(!! 
)!! 
;!! 
app## 
.## 
MapControllers## 
(## 
)## 
;## 
app%% 
.%% 
Run%% 
(%% 
)%% 	
;%%	 
å]
hC:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Migrations\20250124002958_InitialCreate.cs
	namespace 	
InventarioPrueba
 
. 

Migrations %
{ 
public		 

partial		 
class		 
InitialCreate		 &
:		' (
	Migration		) 2
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str "
," #
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Nombre 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
trueS W
)W X
,X Y
Descripcion 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
trueX \
)\ ]
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 4
,4 5
x6 7
=>8 :
x; <
.< =
Id= ?
)? @
;@ A
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id   
=   
table   
.   
Column   %
<  % &
int  & )
>  ) *
(  * +
type  + /
:  / 0
$str  1 6
,  6 7
nullable  8 @
:  @ A
false  B G
)  G H
.!! 

Annotation!! #
(!!# $
$str!!$ 8
,!!8 9
$str!!: @
)!!@ A
,!!A B
Nombre"" 
="" 
table"" "
.""" #
Column""# )
<"") *
string""* 0
>""0 1
(""1 2
type""2 6
:""6 7
$str""8 G
,""G H
nullable""I Q
:""Q R
true""S W
)""W X
,""X Y
Apellido## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: I
,##I J
nullable##K S
:##S T
true##U Y
)##Y Z
,##Z [
Email$$ 
=$$ 
table$$ !
.$$! "
Column$$" (
<$$( )
string$$) /
>$$/ 0
($$0 1
type$$1 5
:$$5 6
$str$$7 F
,$$F G
nullable$$H P
:$$P Q
true$$R V
)$$V W
,$$W X
Telefono%% 
=%% 
table%% $
.%%$ %
Column%%% +
<%%+ ,
string%%, 2
>%%2 3
(%%3 4
type%%4 8
:%%8 9
$str%%: I
,%%I J
nullable%%K S
:%%S T
true%%U Y
)%%Y Z
}&& 
,&& 
constraints'' 
:'' 
table'' "
=>''# %
{(( 
table)) 
.)) 

PrimaryKey)) $
())$ %
$str))% 2
,))2 3
x))4 5
=>))6 8
x))9 :
.)): ;
Id)); =
)))= >
;))> ?
}** 
)** 
;** 
migrationBuilder,, 
.,, 
CreateTable,, (
(,,( )
name-- 
:-- 
$str-- !
,--! "
columns.. 
:.. 
table.. 
=>.. !
new.." %
{// 
Id00 
=00 
table00 
.00 
Column00 %
<00% &
int00& )
>00) *
(00* +
type00+ /
:00/ 0
$str001 6
,006 7
nullable008 @
:00@ A
false00B G
)00G H
.11 

Annotation11 #
(11# $
$str11$ 8
,118 9
$str11: @
)11@ A
,11A B
Nombre22 
=22 
table22 "
.22" #
Column22# )
<22) *
string22* 0
>220 1
(221 2
type222 6
:226 7
$str228 G
,22G H
nullable22I Q
:22Q R
true22S W
)22W X
,22X Y
Descripcion33 
=33  !
table33" '
.33' (
Column33( .
<33. /
string33/ 5
>335 6
(336 7
type337 ;
:33; <
$str33= L
,33L M
nullable33N V
:33V W
true33X \
)33\ ]
,33] ^
Precio44 
=44 
table44 "
.44" #
Column44# )
<44) *
decimal44* 1
>441 2
(442 3
type443 7
:447 8
$str449 H
,44H I
nullable44J R
:44R S
false44T Y
)44Y Z
,44Z [
Cantidad_stock55 "
=55# $
table55% *
.55* +
Column55+ 1
<551 2
int552 5
>555 6
(556 7
type557 ;
:55; <
$str55= B
,55B C
nullable55D L
:55L M
false55N S
)55S T
,55T U
Categoria_id66  
=66! "
table66# (
.66( )
Column66) /
<66/ 0
int660 3
>663 4
(664 5
type665 9
:669 :
$str66; @
,66@ A
nullable66B J
:66J K
false66L Q
)66Q R
}77 
,77 
constraints88 
:88 
table88 "
=>88# %
{99 
table:: 
.:: 

PrimaryKey:: $
(::$ %
$str::% 3
,::3 4
x::5 6
=>::7 9
x::: ;
.::; <
Id::< >
)::> ?
;::? @
table;; 
.;; 

ForeignKey;; $
(;;$ %
name<< 
:<< 
$str<< D
,<<D E
column== 
:== 
x==  !
=>==" $
x==% &
.==& '
Categoria_id==' 3
,==3 4
principalTable>> &
:>>& '
$str>>( 4
,>>4 5
principalColumn?? '
:??' (
$str??) -
,??- .
onDelete@@  
:@@  !
ReferentialAction@@" 3
.@@3 4
Cascade@@4 ;
)@@; <
;@@< =
}AA 
)AA 
;AA 
migrationBuilderCC 
.CC 
CreateTableCC (
(CC( )
nameDD 
:DD 
$strDD 
,DD 
columnsEE 
:EE 
tableEE 
=>EE !
newEE" %
{FF 
IdGG 
=GG 
tableGG 
.GG 
ColumnGG %
<GG% &
intGG& )
>GG) *
(GG* +
typeGG+ /
:GG/ 0
$strGG1 6
,GG6 7
nullableGG8 @
:GG@ A
falseGGB G
)GGG H
.HH 

AnnotationHH #
(HH# $
$strHH$ 8
,HH8 9
$strHH: @
)HH@ A
,HHA B
Producto_idII 
=II  !
tableII" '
.II' (
ColumnII( .
<II. /
intII/ 2
>II2 3
(II3 4
typeII4 8
:II8 9
$strII: ?
,II? @
nullableIIA I
:III J
falseIIK P
)IIP Q
,IIQ R
CantidadJJ 
=JJ 
tableJJ $
.JJ$ %
ColumnJJ% +
<JJ+ ,
intJJ, /
>JJ/ 0
(JJ0 1
typeJJ1 5
:JJ5 6
$strJJ7 <
,JJ< =
nullableJJ> F
:JJF G
falseJJH M
)JJM N
,JJN O
Fecha_ventaKK 
=KK  !
tableKK" '
.KK' (
ColumnKK( .
<KK. /
DateTimeKK/ 7
>KK7 8
(KK8 9
typeKK9 =
:KK= >
$strKK? J
,KKJ K
nullableKKL T
:KKT U
falseKKV [
)KK[ \
,KK\ ]
TotalLL 
=LL 
tableLL !
.LL! "
ColumnLL" (
<LL( )
decimalLL) 0
>LL0 1
(LL1 2
typeLL2 6
:LL6 7
$strLL8 G
,LLG H
nullableLLI Q
:LLQ R
falseLLS X
)LLX Y
}MM 
,MM 
constraintsNN 
:NN 
tableNN "
=>NN# %
{OO 
tablePP 
.PP 

PrimaryKeyPP $
(PP$ %
$strPP% 0
,PP0 1
xPP2 3
=>PP4 6
xPP7 8
.PP8 9
IdPP9 ;
)PP; <
;PP< =
tableQQ 
.QQ 

ForeignKeyQQ $
(QQ$ %
nameRR 
:RR 
$strRR ?
,RR? @
columnSS 
:SS 
xSS  !
=>SS" $
xSS% &
.SS& '
Producto_idSS' 2
,SS2 3
principalTableTT &
:TT& '
$strTT( 3
,TT3 4
principalColumnUU '
:UU' (
$strUU) -
,UU- .
onDeleteVV  
:VV  !
ReferentialActionVV" 3
.VV3 4
CascadeVV4 ;
)VV; <
;VV< =
}WW 
)WW 
;WW 
migrationBuilderYY 
.YY 
CreateIndexYY (
(YY( )
nameZZ 
:ZZ 
$strZZ 1
,ZZ1 2
table[[ 
:[[ 
$str[[ "
,[[" #
column\\ 
:\\ 
$str\\ &
)\\& '
;\\' (
migrationBuilder^^ 
.^^ 
CreateIndex^^ (
(^^( )
name__ 
:__ 
$str__ -
,__- .
table`` 
:`` 
$str`` 
,``  
columnaa 
:aa 
$straa %
)aa% &
;aa& '
}bb 	
	protectedee 
overrideee 
voidee 
Downee  $
(ee$ %
MigrationBuilderee% 5
migrationBuilderee6 F
)eeF G
{ff 	
migrationBuildergg 
.gg 
	DropTablegg &
(gg& '
namehh 
:hh 
$strhh  
)hh  !
;hh! "
migrationBuilderjj 
.jj 
	DropTablejj &
(jj& '
namekk 
:kk 
$strkk 
)kk 
;kk  
migrationBuildermm 
.mm 
	DropTablemm &
(mm& '
namenn 
:nn 
$strnn !
)nn! "
;nn" #
migrationBuilderpp 
.pp 
	DropTablepp &
(pp& '
nameqq 
:qq 
$strqq "
)qq" #
;qq# $
}rr 	
}ss 
}tt ˚
fC:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Controllers\WeatherForecastController.cs
	namespace 	
InventarioPrueba
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private		 
static		 
readonly		 
string		  &
[		& '
]		' (
	Summaries		) 2
=		3 4
new		5 8
[		8 9
]		9 :
{

 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
Name 
= 
$str ,
), -
]- .
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
return 

Enumerable 
. 
Range #
(# $
$num$ %
,% &
$num' (
)( )
.) *
Select* 0
(0 1
index1 6
=>7 9
new: =
WeatherForecast> M
{ 
Date 
= 
DateOnly 
.  
FromDateTime  ,
(, -
DateTime- 5
.5 6
Now6 9
.9 :
AddDays: A
(A B
indexB G
)G H
)H I
,I J
TemperatureC 
= 
Random %
.% &
Shared& ,
., -
Next- 1
(1 2
-2 3
$num3 5
,5 6
$num7 9
)9 :
,: ;
Summary 
= 
	Summaries #
[# $
Random$ *
.* +
Shared+ 1
.1 2
Next2 6
(6 7
	Summaries7 @
.@ A
LengthA G
)G H
]H I
} 
) 
. 
ToArray 
( 
) 
; 
} 	
}   
}!! ÑL
\C:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Controllers\VentaController.cs
	namespace 	
InventarioPrueba
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		 
VentaController		 
:		 
ControllerBase		  .
{

 
private 	
readonly
 
AppDbContext 
_context  (
;( )
public 
VentaController	 
( 
AppDbContext %
context& -
)- .
{ 
_context 
= 
context 
; 
} 
[ 
HttpGet 

]
 
public 
async	 
Task 
< 
ActionResult  
<  !
IEnumerable! ,
<, -
Venta- 2
>2 3
>3 4
>4 5
	GetVentas6 ?
(? @
)@ A
{ 
return 	
await
 
_context 
. 
Ventas 
.  
ToListAsync  +
(+ ,
), -
;- .
} 
[ 
HttpGet 

(
 
$str 
) 
] 
public 
async	 
Task 
< 
ActionResult  
<  !
Venta! &
>& '
>' (
GetVenta) 1
(1 2
int2 5
id6 8
)8 9
{ 
var 
venta 
= 
await 
_context 
. 
Ventas $
.$ %
	FindAsync% .
(. /
id/ 1
)1 2
;2 3
if 
( 
venta 
== 
null 
) 
{ 
return 

NotFound 
( 
) 
; 
}   
return"" 	
venta""
 
;"" 
}## 
[%% 
HttpPost%% 
]%% 
public&& 
async&&	 
Task&& 
<&& 
ActionResult&&  
<&&  !
Venta&&! &
>&&& '
>&&' (
	PostVenta&&) 2
(&&2 3
Venta&&3 8
venta&&9 >
)&&> ?
{'' 
if)) 
()) 
venta)) 
==)) 
null)) 
))) 
{** 
return++ 


BadRequest++ 
(++ 
$str++ 3
)++3 4
;++4 5
},, 
var// 
producto// 
=// 
await// 
_context//  
.//  !
	Productos//! *
.//* +
	FindAsync//+ 4
(//4 5
venta//5 :
.//: ;
Producto_id//; F
)//F G
;//G H
if00 
(00 
producto00 
==00 
null00 
)00 
{11 
return22 


BadRequest22 
(22 
$str22 ;
)22; <
;22< =
}33 
if66 
(66 
venta66 
.66 
Cantidad66 
<=66 
$num66 
)66 
{77 
return88 


BadRequest88 
(88 
$str88 D
)88D E
;88E F
}99 
if<< 
(<< 
venta<< 
.<< 
Cantidad<< 
><< 
producto<<  
.<<  !
Cantidad_stock<<! /
)<</ 0
{== 
return>> 


BadRequest>> 
(>> 
$str>> J
)>>J K
;>>K L
}?? 
productoBB 
.BB 
Cantidad_stockBB 
-=BB 
ventaBB #
.BB# $
CantidadBB$ ,
;BB, -
_contextCC 
.CC 
EntryCC 
(CC 
productoCC 
)CC 
.CC 
StateCC !
=CC" #
EntityStateCC$ /
.CC/ 0
ModifiedCC0 8
;CC8 9
ventaFF 
.FF 	
TotalFF	 
=FF 
productoFF 
.FF 
PrecioFF  
*FF! "
ventaFF# (
.FF( )
CantidadFF) 1
;FF1 2
ventaII 
.II 	
Fecha_ventaII	 
=II 
DateTimeII 
.II  
NowII  #
;II# $
_contextLL 
.LL 
VentasLL 
.LL 
AddLL 
(LL 
ventaLL 
)LL 
;LL 
usingOO 
(OO	 

varOO
 
transactionOO 
=OO 
awaitOO !
_contextOO" *
.OO* +
DatabaseOO+ 3
.OO3 4!
BeginTransactionAsyncOO4 I
(OOI J
)OOJ K
)OOK L
{PP 
tryQQ 
{RR 
awaitSS 

_contextSS 
.SS 
SaveChangesAsyncSS $
(SS$ %
)SS% &
;SS& '
awaitTT 

transactionTT 
.TT 
CommitAsyncTT "
(TT" #
)TT# $
;TT$ %
}UU 
catchVV 	
(VV
 
	ExceptionVV 
)VV 
{WW 
awaitXX 

transactionXX 
.XX 
RollbackAsyncXX $
(XX$ %
)XX% &
;XX& '
returnYY 

StatusCodeYY 
(YY 
$numYY 
,YY 
$strYY D
)YYD E
;YYE F
}ZZ 
}[[ 
return]] 	
CreatedAtAction]]
 
(]] 
nameof]]  
(]]  !
GetVenta]]! )
)]]) *
,]]* +
new]], /
{]]0 1
id]]2 4
=]]5 6
venta]]7 <
.]]< =
Id]]= ?
}]]@ A
,]]A B
venta]]C H
)]]H I
;]]I J
}^^ 
[aa 
HttpPutaa 

(aa
 
$straa 
)aa 
]aa 
publicbb 
asyncbb	 
Taskbb 
<bb 
IActionResultbb !
>bb! "
PutVentabb# +
(bb+ ,
intbb, /
idbb0 2
,bb2 3
Ventabb4 9
ventabb: ?
)bb? @
{cc 
ifdd 
(dd 
iddd 	
!=dd
 
ventadd 
.dd 
Iddd 
)dd 
{ee 
returnff 


BadRequestff 
(ff 
$strff J
)ffJ K
;ffK L
}gg 
ifii 
(ii 
ventaii 
==ii 
nullii 
)ii 
{jj 
returnkk 


BadRequestkk 
(kk 
$strkk 3
)kk3 4
;kk4 5
}ll 
_contextnn 
.nn 
Entrynn 
(nn 
ventann 
)nn 
.nn 
Statenn 
=nn  
EntityStatenn! ,
.nn, -
Modifiednn- 5
;nn5 6
trypp 
{qq 
awaitrr 	
_contextrr
 
.rr 
SaveChangesAsyncrr #
(rr# $
)rr$ %
;rr% &
}ss 
catchtt 
(tt	 
(
DbUpdateConcurrencyExceptiontt
 &
)tt& '
{uu 
ifvv 
(vv 
!vv 	
VentaExistsvv	 
(vv 
idvv 
)vv 
)vv 
{ww 
returnxx 
NotFoundxx 
(xx 
)xx 
;xx 
}yy 
elsezz 
{{{ 
throw|| 

;||
 
}}} 
}~~ 
return
ÄÄ 	
	NoContent
ÄÄ
 
(
ÄÄ 
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 
[
ÉÉ 

HttpDelete
ÉÉ 
(
ÉÉ 
$str
ÉÉ 
)
ÉÉ 
]
ÉÉ 
public
ÑÑ 
async
ÑÑ	 
Task
ÑÑ 
<
ÑÑ 
IActionResult
ÑÑ !
>
ÑÑ! "
DeleteVenta
ÑÑ# .
(
ÑÑ. /
int
ÑÑ/ 2
id
ÑÑ3 5
)
ÑÑ5 6
{
ÖÖ 
var
ÜÜ 
venta
ÜÜ 
=
ÜÜ 
await
ÜÜ 
_context
ÜÜ 
.
ÜÜ 
Ventas
ÜÜ $
.
ÜÜ$ %
	FindAsync
ÜÜ% .
(
ÜÜ. /
id
ÜÜ/ 1
)
ÜÜ1 2
;
ÜÜ2 3
if
áá 
(
áá 
venta
áá 
==
áá 
null
áá 
)
áá 
{
àà 
return
ââ 

NotFound
ââ 
(
ââ 
)
ââ 
;
ââ 
}
ää 
_context
åå 
.
åå 
Ventas
åå 
.
åå 
Remove
åå 
(
åå 
venta
åå 
)
åå  
;
åå  !
await
çç 
_context
çç	 
.
çç 
SaveChangesAsync
çç "
(
çç" #
)
çç# $
;
çç$ %
return
èè 	
	NoContent
èè
 
(
èè 
)
èè 
;
èè 
}
êê 
private
íí 	
bool
íí
 
VentaExists
íí 
(
íí 
int
íí 
id
íí !
)
íí! "
{
ìì 
return
îî 	
_context
îî
 
.
îî 
Ventas
îî 
.
îî 
Any
îî 
(
îî 
e
îî 
=>
îî  "
e
îî# $
.
îî$ %
Id
îî% '
==
îî( *
id
îî+ -
)
îî- .
;
îî. /
}
ïï 
}
ññ 
}óó µ;
_C:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Controllers\ProductoController.cs
	namespace 	
InventarioPrueba
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		 
ProductosController		 !
:		" #
ControllerBase		$ 2
{

 
private 	
readonly
 
AppDbContext 
_context  (
;( )
public 
ProductosController	 
( 
AppDbContext )
context* 1
)1 2
{ 
_context 
= 
context 
; 
} 
[ 
HttpGet 

]
 
public 
async	 
Task 
< 
ActionResult  
<  !
IEnumerable! ,
<, -
Producto- 5
>5 6
>6 7
>7 8
GetProductos9 E
(E F
)F G
{ 
return 	
await
 
_context 
. 
	Productos "
." #
ToListAsync# .
(. /
)/ 0
;0 1
} 
[ 
HttpGet 

(
 
$str 
) 
] 
public 
async	 
Task 
< 
ActionResult  
<  !
Producto! )
>) *
>* +
GetProducto, 7
(7 8
int8 ;
id< >
)> ?
{ 
var 
producto 
= 
await 
_context  
.  !
	Productos! *
.* +
	FindAsync+ 4
(4 5
id5 7
)7 8
;8 9
if 
( 
producto 
== 
null 
) 
{ 
return 

NotFound 
( 
) 
; 
}   
return"" 	
producto""
 
;"" 
}## 
[%% 
HttpPost%% 
]%% 
public&& 
async&&	 
Task&& 
<&& 
ActionResult&&  
<&&  !
Producto&&! )
>&&) *
>&&* +
PostProducto&&, 8
(&&8 9
Producto&&9 A
producto&&B J
)&&J K
{'' 
if)) 
()) 
producto)) 
.)) 
Precio)) 
<)) 
$num)) 
))) 
{** 
return++ 


BadRequest++ 
(++ 
$str++ A
)++A B
;++B C
},, 
if// 
(// 
producto// 
.// 
Cantidad_stock// 
<//  
$num//! "
)//" #
{00 
return11 


BadRequest11 
(11 
$str11 L
)11L M
;11M N
}22 
_context66 
.66 
	Productos66 
.66 
Add66 
(66 
producto66 "
)66" #
;66# $
await77 
_context77	 
.77 
SaveChangesAsync77 "
(77" #
)77# $
;77$ %
return99 	
CreatedAtAction99
 
(99 
nameof99  
(99  !
GetProducto99! ,
)99, -
,99- .
new99/ 2
{993 4
id995 7
=998 9
producto99: B
.99B C
Id99C E
}99F G
,99G H
producto99I Q
)99Q R
;99R S
}:: 
[== 
HttpPut== 

(==
 
$str== 
)== 
]== 
public>> 
async>>	 
Task>> 
<>> 
IActionResult>> !
>>>! "
PutProducto>># .
(>>. /
int>>/ 2
id>>3 5
,>>5 6
Producto>>7 ?
producto>>@ H
)>>H I
{?? 
if@@ 
(@@ 
id@@ 	
!=@@
 
producto@@ 
.@@ 
Id@@ 
)@@ 
{AA 
returnBB 


BadRequestBB 
(BB 
$strBB K
)BBK L
;BBL M
}CC 
ifEE 
(EE 
productoEE 
==EE 
nullEE 
)EE 
{FF 
returnGG 


BadRequestGG 
(GG 
$strGG 6
)GG6 7
;GG7 8
}HH 
ifJJ 
(JJ 
stringJJ 
.JJ 
IsNullOrEmptyJJ 
(JJ 
productoJJ $
.JJ$ %
NombreJJ% +
)JJ+ ,
)JJ, -
{KK 
returnLL 


BadRequestLL 
(LL 
$strLL <
)LL< =
;LL= >
}MM 
_contextOO 
.OO 
EntryOO 
(OO 
productoOO 
)OO 
.OO 
StateOO !
=OO" #
EntityStateOO$ /
.OO/ 0
ModifiedOO0 8
;OO8 9
tryQQ 
{RR 
awaitSS 	
_contextSS
 
.SS 
SaveChangesAsyncSS #
(SS# $
)SS$ %
;SS% &
}TT 
catchUU 
(UU	 
(
DbUpdateConcurrencyExceptionUU
 &
)UU& '
{VV 
ifWW 
(WW 
!WW 	
ProductoExistsWW	 
(WW 
idWW 
)WW 
)WW 
{XX 
returnYY 
NotFoundYY 
(YY 
)YY 
;YY 
}ZZ 
else[[ 
{\\ 
throw]] 

;]]
 
}^^ 
}__ 
returnaa 	
	NoContentaa
 
(aa 
)aa 
;aa 
}bb 
[dd 

HttpDeletedd 
(dd 
$strdd 
)dd 
]dd 
publicee 
asyncee	 
Taskee 
<ee 
IActionResultee !
>ee! "
DeleteProductoee# 1
(ee1 2
intee2 5
idee6 8
)ee8 9
{ff 
vargg 
productogg 
=gg 
awaitgg 
_contextgg  
.gg  !
	Productosgg! *
.gg* +
	FindAsyncgg+ 4
(gg4 5
idgg5 7
)gg7 8
;gg8 9
ifhh 
(hh 
productohh 
==hh 
nullhh 
)hh 
{ii 
returnjj 

NotFoundjj 
(jj 
)jj 
;jj 
}kk 
_contextmm 
.mm 
	Productosmm 
.mm 
Removemm 
(mm 
productomm %
)mm% &
;mm& '
awaitnn 
_contextnn	 
.nn 
SaveChangesAsyncnn "
(nn" #
)nn# $
;nn$ %
returnpp 	
	NoContentpp
 
(pp 
)pp 
;pp 
}qq 
privatess 	
boolss
 
ProductoExistsss 
(ss 
intss !
idss" $
)ss$ %
{tt 
returnuu 	
_contextuu
 
.uu 
	Productosuu 
.uu 
Anyuu  
(uu  !
euu! "
=>uu# %
euu& '
.uu' (
Iduu( *
==uu+ -
iduu. 0
)uu0 1
;uu1 2
}vv 
}ww 
}xx ‰6
^C:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Controllers\ClienteController.cs
	namespace 	
InventarioPrueba
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		 
ClienteController		 
:		  !
ControllerBase		" 0
{

 
private 	
readonly
 
AppDbContext 
_context  (
;( )
public 
ClienteController	 
( 
AppDbContext '
context( /
)/ 0
{ 
_context 
= 
context 
; 
} 
[ 
HttpGet 

]
 
public 
async	 
Task 
< 
ActionResult  
<  !
IEnumerable! ,
<, -
Cliente- 4
>4 5
>5 6
>6 7
GetClientes8 C
(C D
)D E
{ 
return 	
await
 
_context 
. 
Clientes !
.! "
ToListAsync" -
(- .
). /
;/ 0
} 
[ 
HttpGet 

(
 
$str 
) 
] 
public 
async	 
Task 
< 
ActionResult  
<  !
Cliente! (
>( )
>) *

GetCliente+ 5
(5 6
int6 9
id: <
)< =
{ 
var 
cliente 
= 
await 
_context 
.  
Clientes  (
.( )
	FindAsync) 2
(2 3
id3 5
)5 6
;6 7
if 
( 
cliente 
== 
null 
) 
{ 
return 

NotFound 
( 
) 
; 
}   
return"" 	
cliente""
 
;"" 
}## 
[%% 
HttpPost%% 
]%% 
public&& 
async&&	 
Task&& 
<&& 
ActionResult&&  
<&&  !
Cliente&&! (
>&&( )
>&&) *
PostCliente&&+ 6
(&&6 7
Cliente&&7 >
cliente&&? F
)&&F G
{'' 
_context(( 
.(( 
Clientes(( 
.(( 
Add(( 
((( 
cliente((  
)((  !
;((! "
await)) 
_context))	 
.)) 
SaveChangesAsync)) "
())" #
)))# $
;))$ %
return++ 	
CreatedAtAction++
 
(++ 
nameof++  
(++  !

GetCliente++! +
)+++ ,
,++, -
new++. 1
{++2 3
id++4 6
=++7 8
cliente++9 @
.++@ A
Id++A C
}++D E
,++E F
cliente++G N
)++N O
;++O P
},, 
[.. 
HttpPut.. 

(..
 
$str.. 
).. 
].. 
public// 
async//	 
Task// 
<// 
IActionResult// !
>//! "

PutCliente//# -
(//- .
int//. 1
id//2 4
,//4 5
Cliente//6 =
cliente//> E
)//E F
{00 
if11 
(11 
id11 	
!=11
 
cliente11 
.11 
Id11 
)11 
{22 
return33 


BadRequest33 
(33 
$str33 J
)33J K
;33K L
}44 
if66 
(66 
cliente66 
==66 
null66 
)66 
{77 
return88 


BadRequest88 
(88 
$str88 5
)885 6
;886 7
}99 
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; 
(;; 
cliente;; #
.;;# $
Nombre;;$ *
);;* +
);;+ ,
{<< 
return== 


BadRequest== 
(== 
$str== ;
)==; <
;==< =
}>> 
_context@@ 
.@@ 
Entry@@ 
(@@ 
cliente@@ 
)@@ 
.@@ 
State@@  
=@@! "
EntityState@@# .
.@@. /
Modified@@/ 7
;@@7 8
tryBB 
{CC 
awaitDD 	
_contextDD
 
.DD 
SaveChangesAsyncDD #
(DD# $
)DD$ %
;DD% &
}EE 
catchFF 
(FF	 
(
DbUpdateConcurrencyExceptionFF
 &
)FF& '
{GG 
ifHH 
(HH 
!HH 	
ClienteExistsHH	 
(HH 
idHH 
)HH 
)HH 
{II 
returnJJ 
NotFoundJJ 
(JJ 
)JJ 
;JJ 
}KK 
elseLL 
{MM 
throwNN 

;NN
 
}OO 
}PP 
returnRR 	
	NoContentRR
 
(RR 
)RR 
;RR 
}SS 
[UU 

HttpDeleteUU 
(UU 
$strUU 
)UU 
]UU 
publicVV 
asyncVV	 
TaskVV 
<VV 
IActionResultVV !
>VV! "
DeleteClienteVV# 0
(VV0 1
intVV1 4
idVV5 7
)VV7 8
{WW 
varXX 
clienteXX 
=XX 
awaitXX 
_contextXX 
.XX  
ClientesXX  (
.XX( )
	FindAsyncXX) 2
(XX2 3
idXX3 5
)XX5 6
;XX6 7
ifYY 
(YY 
clienteYY 
==YY 
nullYY 
)YY 
{ZZ 
return[[ 

NotFound[[ 
([[ 
)[[ 
;[[ 
}\\ 
_context^^ 
.^^ 
Clientes^^ 
.^^ 
Remove^^ 
(^^ 
cliente^^ #
)^^# $
;^^$ %
await__ 
_context__	 
.__ 
SaveChangesAsync__ "
(__" #
)__# $
;__$ %
returnaa 	
	NoContentaa
 
(aa 
)aa 
;aa 
}bb 
privatedd 	
booldd
 
ClienteExistsdd 
(dd 
intdd  
iddd! #
)dd# $
{ee 
returnff 	
_contextff
 
.ff 
Clientesff 
.ff 
Anyff 
(ff  
eff  !
=>ff" $
eff% &
.ff& '
Idff' )
==ff* ,
idff- /
)ff/ 0
;ff0 1
}gg 
}hh 
}ii ≠7
`C:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\Controllers\CategoriaController.cs
	namespace 	
InventarioPrueba
 
. 
Controllers &
{ 
[ 
ApiController 
] 
[ 
Route 
( 
$str 
) 
] 
public		 
class		 
CategoriaController		 !
:		" #
ControllerBase		$ 2
{

 
private 	
readonly
 
AppDbContext 
_context  (
;( )
public 
CategoriaController	 
( 
AppDbContext )
context* 1
)1 2
{ 
_context 
= 
context 
; 
} 
[ 
HttpGet 

]
 
public 
async	 
Task 
< 
ActionResult  
<  !
IEnumerable! ,
<, -
	Categoria- 6
>6 7
>7 8
>8 9
GetCategoria: F
(F G
)G H
{ 
return 	
await
 
_context 
. 

Categorias #
.# $
ToListAsync$ /
(/ 0
)0 1
;1 2
} 
[ 
HttpGet 

(
 
$str 
) 
] 
public 
async	 
Task 
< 
ActionResult  
<  !
	Categoria! *
>* +
>+ ,
GetCategoria- 9
(9 :
int: =
id> @
)@ A
{ 
var 
	categoria 
= 
await 
_context !
.! "

Categorias" ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
if 
( 
	categoria 
== 
null 
) 
{ 
return 

NotFound 
( 
) 
; 
}   
return"" 	
	categoria""
 
;"" 
}## 
[%% 
HttpPost%% 
]%% 
public&& 
async&&	 
Task&& 
<&& 
ActionResult&&  
<&&  !
	Categoria&&! *
>&&* +
>&&+ ,
PostCategoria&&- :
(&&: ;
	Categoria&&; D
	categoria&&E N
)&&N O
{'' 
_context(( 
.(( 

Categorias(( 
.(( 
Add(( 
((( 
	categoria(( $
)(($ %
;((% &
await)) 
_context))	 
.)) 
SaveChangesAsync)) "
())" #
)))# $
;))$ %
return++ 	
CreatedAtAction++
 
(++ 
nameof++  
(++  !
GetCategoria++! -
)++- .
,++. /
new++0 3
{++4 5
id++6 8
=++9 :
	categoria++; D
.++D E
Id++E G
}++H I
,++I J
	categoria++K T
)++T U
;++U V
},, 
[.. 
HttpPut.. 

(..
 
$str.. 
).. 
].. 
public// 
async//	 
Task// 
<// 
IActionResult// !
>//! "
PutCategoria//# /
(/// 0
int//0 3
id//4 6
,//6 7
	Categoria//8 A
	categoria//B K
)//K L
{00 
if11 
(11 
id11 	
!=11
 
	categoria11 
.11 
Id11 
)11 
{22 
return33 


BadRequest33 
(33 
$str33 N
)33N O
;33O P
}44 
if66 
(66 
	categoria66 
==66 
null66 
)66 
{77 
return88 


BadRequest88 
(88 
$str88 7
)887 8
;888 9
}99 
if;; 
(;; 
string;; 
.;; 
IsNullOrEmpty;; 
(;; 
	categoria;; %
.;;% &
Nombre;;& ,
);;, -
);;- .
{<< 
return== 


BadRequest== 
(== 
$str== ?
)==? @
;==@ A
}>> 
_context@@ 
.@@ 
Entry@@ 
(@@ 
	categoria@@ 
)@@ 
.@@ 
State@@ "
=@@# $
EntityState@@% 0
.@@0 1
Modified@@1 9
;@@9 :
tryBB 
{CC 
awaitDD 	
_contextDD
 
.DD 
SaveChangesAsyncDD #
(DD# $
)DD$ %
;DD% &
}EE 
catchFF 
(FF	 
(
DbUpdateConcurrencyExceptionFF
 &
)FF& '
{GG 
ifHH 
(HH 
!HH 	
CategoriaExistsHH	 
(HH 
idHH 
)HH 
)HH 
{II 
returnJJ 
NotFoundJJ 
(JJ 
)JJ 
;JJ 
}KK 
elseLL 
{MM 
throwNN 

;NN
 
}OO 
}PP 
returnRR 	
	NoContentRR
 
(RR 
)RR 
;RR 
}SS 
[VV 

HttpDeleteVV 
(VV 
$strVV 
)VV 
]VV 
publicWW 
asyncWW	 
TaskWW 
<WW 
IActionResultWW !
>WW! "
DeleteCategoriaWW# 2
(WW2 3
intWW3 6
idWW7 9
)WW9 :
{XX 
varYY 
	categoriaYY 
=YY 
awaitYY 
_contextYY !
.YY! "

CategoriasYY" ,
.YY, -
	FindAsyncYY- 6
(YY6 7
idYY7 9
)YY9 :
;YY: ;
ifZZ 
(ZZ 
	categoriaZZ 
==ZZ 
nullZZ 
)ZZ 
{[[ 
return\\ 

NotFound\\ 
(\\ 
)\\ 
;\\ 
}]] 
_context__ 
.__ 

Categorias__ 
.__ 
Remove__ 
(__ 
	categoria__ '
)__' (
;__( )
await`` 
_context``	 
.`` 
SaveChangesAsync`` "
(``" #
)``# $
;``$ %
returnbb 	
	NoContentbb
 
(bb 
)bb 
;bb 
}cc 
privateee 	
boolee
 
CategoriaExistsee 
(ee 
intee "
idee# %
)ee% &
{ff 
returngg 	
_contextgg
 
.gg 

Categoriasgg 
.gg 
Anygg !
(gg! "
egg" #
=>gg$ &
egg' (
.gg( )
Idgg) +
==gg, .
idgg/ 1
)gg1 2
;gg2 3
}hh 
}ii 
}jj à/
MC:\Users\Admin\source\repos\InventarioPrueba\InventarioPrueba\AppDbContext.cs
	namespace 	
InventarioPrueba
 
{ 
public		 
class		 
AppDbContext		 
:		 
	DbContext		 %
{

 
public 
AppDbContext	 
( 
DbContextOptions &
<& '
AppDbContext' 3
>3 4
options5 <
)< =
:= >
base? C
(C D
optionsD K
)K L
{M N
} 
public 
DbSet	 
< 
	Categoria 
> 

Categorias $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DbSet	 
< 
Cliente 
> 
Clientes  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet	 
< 
Producto 
> 
	Productos "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DbSet	 
< 
Venta 
> 
Ventas 
{ 
get "
;" #
set$ '
;' (
}) *
	protected 
override 
void 
OnModelCreating )
() *
ModelBuilder* 6
modelBuilder7 C
)C D
{ 
modelBuilder 
. 
Entity 
< 
Producto 
>  
(  !
)! "
. 
HasOne 
< 
	Categoria 
> 
( 
) 
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
p 
=> 
p 
. 
Categoria_id &
)& '
;' (
modelBuilder 
. 
Entity 
< 
Venta 
> 
( 
) 
. 
HasOne 
< 
Producto 
> 
( 
) 
. 
WithMany 
( 
) 
. 
HasForeignKey 
( 
v 
=> 
v 
. 
Producto_id %
)% &
;& '
} 
public!! 
class!!	 
	Categoria!! 
{"" 
public## 	
int##
 
Id## 
{## 
get## 
;## 
set## 
;## 
}## 
public$$ 	
string$$
 
?$$ 
Nombre$$ 
{$$ 
get$$ 
;$$ 
set$$  #
;$$# $
}$$% &
public%% 	
string%%
 
?%% 
Descripcion%% 
{%% 
get%%  #
;%%# $
set%%% (
;%%( )
}%%* +
}&& 
public(( 
class((	 
Cliente(( 
{)) 
public** 	
int**
 
Id** 
{** 
get** 
;** 
set** 
;** 
}** 
public++ 	
string++
 
?++ 
Nombre++ 
{++ 
get++ 
;++ 
set++  #
;++# $
}++% &
public,, 	
string,,
 
?,, 
Apellido,, 
{,, 
get,,  
;,,  !
set,," %
;,,% &
},,' (
public-- 	
string--
 
?-- 
Email-- 
{-- 
get-- 
;-- 
set-- "
;--" #
}--$ %
public.. 	
string..
 
?.. 
Telefono.. 
{.. 
get..  
;..  !
set.." %
;..% &
}..' (
}// 
public11 
class11	 
Producto11 
{22 
public33 	
int33
 
Id33 
{33 
get33 
;33 
set33 
;33 
}33 
public44 	
string44
 
?44 
Nombre44 
{44 
get44 
;44 
set44  #
;44# $
}44% &
public55 	
string55
 
?55 
Descripcion55 
{55 
get55  #
;55# $
set55% (
;55( )
}55* +
public66 	
decimal66
 
Precio66 
{66 
get66 
;66 
set66  #
;66# $
}66% &
public77 	
int77
 
Cantidad_stock77 
{77 
get77 "
;77" #
set77$ '
;77' (
}77) *
public88 	
int88
 
Categoria_id88 
{88 
get88  
;88  !
set88" %
;88% &
}88' (
}99 
public;; 
class;;	 
Venta;; 
{<< 
public== 	
int==
 
Id== 
{== 
get== 
;== 
set== 
;== 
}== 
public>> 	
int>>
 
Producto_id>> 
{>> 
get>> 
;>>  
set>>! $
;>>$ %
}>>& '
public?? 	
int??
 
Cantidad?? 
{?? 
get?? 
;?? 
set?? !
;??! "
}??# $
public@@ 	
DateTime@@
 
Fecha_venta@@ 
{@@  
get@@! $
;@@$ %
set@@& )
;@@) *
}@@+ ,
publicAA 	
decimalAA
 
TotalAA 
{AA 
getAA 
;AA 
setAA "
;AA" #
}AA$ %
}BB 
}CC 
}DD 